const miModulo=(()=>{let e=[],f=[],g=["C","D","H","S"],h=["A","J","Q","K"],a=document.querySelector("#btnNewCard"),b=document.querySelector("#btnStop"),c=document.querySelector("#btnNewGame"),i=document.querySelectorAll("small"),j=document.querySelectorAll(".divCartas"),d=(d=2)=>{e=k(),f=[];for(let c=0;c<d;c++)f.push(0);i.forEach(a=>a.innerText=0),j.forEach(a=>a.innerHTML=""),a.disabled=!1,b.disabled=!1},k=()=>{for(let a=2;a<=10;a++)for(let b of g)e.push(a+b);for(let c of g)for(let d of h)e.push(d+c);return _.shuffle(e)},l=()=>{if(0===e.length)throw"No hay cartas en el deck";return e.pop()},m=b=>{let a=b.substring(0,b.length-1);return"A"===a?11:isNaN(a)?10:1*a},n=(b,a)=>(f[a]=f[a]+m(b),i[a].innerText=f[a],f[a]),o=(b,c)=>{let a=document.createElement("img");a.src=`assets/cartas/${b}.png`,a.classList.add("carta"),j[c].append(a)},p=()=>{let[a,b]=f;setTimeout(()=>{a>21||b<=21&&b>a?alert("Lo siento. La Computadora ha Ganado :("):a===b?alert("Es empate. Nadie Gana."):b>21&&alert("Felicidades! Has Ganado :D")},100)},q=a=>{let b=0;do{let c=l();b=n(c,f.length-1),o(c,f.length-1)}while(b<a&&a<=21)p()};return a.addEventListener("click",()=>{let d=l(),c=n(d,0);o(d,0),c>21?(console.warn("Lo siento mucho, perdiste"),a.disabled=!0,b.disabled=!0,q(c)):21===c&&(console.warn("21, muy bien"),a.disabled=!0,b.disabled=!0,q(c))}),b.addEventListener("click",()=>{console.warn("Turno de la computadora"),a.disabled=!0,b.disabled=!0,q(f[0])}),c.addEventListener("click",()=>{d()}),{nuevoJuego:d}})()